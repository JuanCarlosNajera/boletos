<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmación de Pago</title>
    <!-- Enlace a los archivos CSS de Bootstrap (Plantilla "Lux") -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/4.5.2/lux/bootstrap.min.css">
    <!-- Enlace a la biblioteca "qrcode-generator" -->
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Confirmación de Pago</h2>
        <p class="text-center">¡Gracias por su reserva! Su pago ha sido procesado con éxito.</p>
        <p class="text-center">Detalles de la reserva:</p>
        <ul id="reservation-details" class="list-group mx-auto" style="max-width: 300px;">
            <!-- Los detalles de los asientos seleccionados se agregarán aquí mediante JavaScript -->
        </ul>
        <p class="text-center">Si tiene alguna pregunta, no dude en contactarnos.</p>
        <div class="text-center mt-4">
            <div id="qrcode"></div>
        </div>
    </div>

    <!-- Enlace a los archivos JavaScript de Bootstrap y tu propio script -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        // Recuperar los detalles de los asientos seleccionados del almacenamiento local
        const selectedSeats = JSON.parse(localStorage.getItem('selectedSeats'));
        const reservationDetailsList = document.getElementById('reservation-details');

        if (selectedSeats && selectedSeats.length > 0) {
            for (const seat of selectedSeats) {
                const seatDetails = document.createElement('li');
                seatDetails.textContent = `Asiento: Fila ${seat.row + 1} - Asiento ${seat.col + 1}`;
                seatDetails.classList.add('list-group-item');
                reservationDetailsList.appendChild(seatDetails);
            }

            // Generar el código QR con los detalles de la reserva
            const qrCodeDiv = document.getElementById('qrcode');
            const qrCode = new QRCode(qrCodeDiv, {
                text: JSON.stringify(selectedSeats),
                width: 128,
                height: 128
            });
        } else {
            // Si no se han seleccionado asientos, mostrar un mensaje alternativo
            const noSeatsMessage = document.createElement('li');
            noSeatsMessage.textContent = 'No se han seleccionado asientos.';
            noSeatsMessage.classList.add('list-group-item');
            reservationDetailsList.appendChild(noSeatsMessage);
        }
    </script>
</body>
</html>
